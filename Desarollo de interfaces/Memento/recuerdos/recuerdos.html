<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Memories Recorder</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="form-container">
    <h2 id="formTitle">Nuevo Recuerdo</h2>

    <form id="memoryForm">
      <input type="hidden" id="_id">

      <div class="form-group">
        <label for="vista">Vista:</label>
        <div class="input-with-button">
          <textarea id="vista" placeholder="Describe lo que viste..."></textarea>
          <button type="button" class="record-button" data-target="vista">ðŸŽ¤</button>
        </div>
      </div>

      <div class="form-group">
        <label for="momento">Momento:</label>
        <input type="date" id="momento">
      </div>

      <div class="form-group">
        <label for="oido">OÃ­do:</label>
        <div class="input-with-button">
          <textarea id="oido" placeholder="Describe lo que escuchaste..."></textarea>
          <button type="button" class="record-button" data-target="oido">ðŸŽ¤</button>
        </div>
      </div>

      <div class="form-group">
        <label for="sentimos">Sentimos:</label>
        <div class="input-with-button">
          <textarea id="sentimos" placeholder="Describe lo que sentiste..."></textarea>
          <button type="button" class="record-button" data-target="sentimos">ðŸŽ¤</button>
        </div>
      </div>

      <div class="form-group">
        <label for="olemos">Olemos:</label>
        <div class="input-with-button">
          <textarea id="olemos" placeholder="Describe lo que oliste..."></textarea>
          <button type="button" class="record-button" data-target="olemos">ðŸŽ¤</button>
        </div>
      </div>

      <div class="form-group">
        <label for="sabor">Sabor:</label>
        <div class="input-with-button">
          <textarea id="sabor" placeholder="Describe lo que saboreaste..."></textarea>
          <button type="button" class="record-button" data-target="sabor">ðŸŽ¤</button>
        </div>
      </div>

      <div class="form-group">
        <label for="palpamos">Palpamos:</label>
        <div class="input-with-button">
          <textarea id="palpamos" placeholder="Describe lo que tocaste..."></textarea>
          <button type="button" class="record-button" data-target="palpamos">ðŸŽ¤</button>
        </div>
      </div>

      <div class="form-group">
        <label for="pensamos">Pensamos:</label>
        <div class="input-with-button">
          <textarea id="pensamos" placeholder="Describe en quÃ© pensaste..."></textarea>
          <button type="button" class="record-button" data-target="pensamos">ðŸŽ¤</button>
        </div>
      </div>

      <div class="form-group">
        <label for="ubicacion">UbicaciÃ³n:</label>
        <div class="input-with-button">
          <input type="text" id="ubicacion" placeholder="Â¿DÃ³nde estabas?">
          <button type="button" class="record-button" data-target="ubicacion">ðŸŽ¤</button>
        </div>
      </div>

      <div class="form-group">
        <label for="lecciones">Lecciones aprendidas:</label>
        <div class="input-with-button">
          <textarea id="lecciones" placeholder="Â¿QuÃ© has aprendido de este recuerdo?"></textarea>
          <button type="button" class="record-button" data-target="lecciones">ðŸŽ¤</button>
        </div>
      </div>

      <div class="emotions">
        <h3>Emociones principales (0â€“10)</h3>

        <div class="emo-row">
          <div class="emo-label"><span class="emo-dot" id="dot_alegria"></span>AlegrÃ­a</div>
          <div class="emo-slider">
            <input id="alegria" type="range" min="0" max="10" value="0">
            <span class="emo-value" id="val_alegria">0</span>
          </div>
        </div>

        <div class="emo-row">
          <div class="emo-label"><span class="emo-dot" id="dot_tristeza"></span>Tristeza</div>
          <div class="emo-slider">
            <input id="tristeza" type="range" min="0" max="10" value="0">
            <span class="emo-value" id="val_tristeza">0</span>
          </div>
        </div>

        <div class="emo-row">
          <div class="emo-label"><span class="emo-dot" id="dot_miedo"></span>Miedo</div>
          <div class="emo-slider">
            <input id="miedo" type="range" min="0" max="10" value="0">
            <span class="emo-value" id="val_miedo">0</span>
          </div>
        </div>

        <div class="emo-row">
          <div class="emo-label"><span class="emo-dot" id="dot_ira"></span>Ira</div>
          <div class="emo-slider">
            <input id="ira" type="range" min="0" max="10" value="0">
            <span class="emo-value" id="val_ira">0</span>
          </div>
        </div>

        <div class="emo-row">
          <div class="emo-label"><span class="emo-dot" id="dot_asco"></span>Asco</div>
          <div class="emo-slider">
            <input id="asco" type="range" min="0" max="10" value="0">
            <span class="emo-value" id="val_asco">0</span>
          </div>
        </div>

        <div class="emo-row" style="margin-bottom:0;">
          <div class="emo-label"><span class="emo-dot" id="dot_sorpresa"></span>Sorpresa</div>
          <div class="emo-slider">
            <input id="sorpresa" type="range" min="0" max="10" value="0">
            <span class="emo-value" id="val_sorpresa">0</span>
          </div>
        </div>
      </div>

      <button type="submit" id="saveBtn">Guardar Recuerdo</button>
      <button type="button" id="cancelEditBtn" style="display:none;margin-top:8px;">Cancelar ediciÃ³n</button>
    </form>

    <div class="search-container">
      <label for="search">Buscar en recuerdos:</label>
      <input type="text" id="search" placeholder="Escribe aquÃ­ para conectar recuerdos relacionados...">
    </div>

    <!-- Filters + Export/Import -->
    <div class="search-container" style="margin-top:12px;">
      <label style="font-weight:700;">Filtros:</label>

      <div class="form-group" style="margin-top:10px;">
        <label for="dateFrom">Desde:</label>
        <input type="date" id="dateFrom">
      </div>

      <div class="form-group">
        <label for="dateTo">Hasta:</label>
        <input type="date" id="dateTo">
      </div>

      <div class="form-group">
        <label for="locFilter">UbicaciÃ³n contiene:</label>
        <input type="text" id="locFilter" placeholder="Ej: casa, Madrid...">
      </div>

      <div class="form-group">
        <label for="emoKey">EmociÃ³n dominante:</label>
        <select id="emoKey" style="width:100%;padding:10px 12px;border-radius:var(--radius-sm);border:1px solid rgba(0,0,0,0.16);background:rgba(255,255,255,0.75);">
          <option value="">Cualquiera</option>
          <option value="alegria">AlegrÃ­a</option>
          <option value="tristeza">Tristeza</option>
          <option value="miedo">Miedo</option>
          <option value="ira">Ira</option>
          <option value="asco">Asco</option>
          <option value="sorpresa">Sorpresa</option>
        </select>
      </div>

      <div class="form-group">
        <label for="emoMin">MÃ­nimo (0â€“10): <span id="emoMinVal">0</span></label>
        <input id="emoMin" type="range" min="0" max="10" value="0">
      </div>

      <div style="display:flex; gap:10px; margin-top:10px;">
        <button type="button" id="exportBtn" style="flex:1;">Exportar JSON</button>
        <button type="button" id="importBtn" style="flex:1;">Importar JSON</button>
        <input type="file" id="importFile" accept="application/json" style="display:none;">
      </div>
    </div>
  </div>

  <div class="stage-wrap">
    <canvas id="canvas"></canvas>
  </div>

  <!-- Modal -->
  <div id="memoryModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Detalles del Recuerdo</h3>
        <button class="close-button" id="closeModal">&times;</button>
      </div>

      <div class="modal-body" id="modalContent"></div>

      <div style="display:flex; gap:10px; margin-top:14px;">

      </div>
    </div>
  </div>

  <script src="scripts.js"></script>
</body>
</html>

